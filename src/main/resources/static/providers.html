<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <title>Provider Directory</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <!-- bootstrap needs some JS to do its thing -->
    <!-- don't use slim, it doesn't include ajax 
    <script src="jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    -->
    <script src="jquery-3.3.1.min.js" crossorigin="anonymous"></script>
	<script src="popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	
	<script type="text/javascript">
		$(document).ready(function() {
			// handle provider submissions
    		$('form').submit(function(event) {
    			// build the JSON structure we'll send over
    			var formData = { 
            		'first_name' : $('input[name=first_name]').val(),
            		'last_name' : $('input[name=last_name]').val(),
            		'email_address'	: $('input[name=email_address]').val(),
            		'specialty' : $('input[name=specialty]').val(),
            		'practice_name' : $('input[name=practice_name]').val()
        		};
			
        		// POST the form contents to the /provider REST endpoint
        		$.ajax({
            		type        : 'POST',
		            url         : 'provider',
    		        data        : JSON.stringify(formData),
    		        contentType : "application/json; charset=utf-8",
        		    dataType    : 'json',
					encode      : false
	        	}).done(function(data) {
					// log data to the console so we can see
	    	        console.log(data); 
				});

    	    	// stop the form from submitting the normal way and refreshing the page
        		event.preventDefault();
        		
				// clear out the form with plain old JS
    		    document.getElementById("create_provider").reset();
    		});
    		
    		// load providers from the rest endpoint and present a table-ish structure
    	});
	</script>
</head>
<body>
	<div class="container-fluid">
		<h1>Provider Directory</h1>
		<p>v2.0</p>
		<div class="row">
			<div class="col-4">
				<h5>Create Provider</h5>
				<form id="create_provider" action="/providers" method="POST">
					<label for="last_name">Last Name</label>
					<div class="col-2">
      					<input type="text" name="last_name"><br/>
      				</div>
					<label for="first_name">First Name</label>
					<div class="col-2"> 
      					<input type="text" name="first_name"><br/>
      				</div>
      				<label for="email_address">Email Address</label>
      				<div class="col-2">
      					<input type="text" name="email_address"><br/>
      				</div>
      				<label for="specialty">Specialty</label>
      				<div class="col-2">
      					<input type="text" name="specialty"></br>
      				</div>
      				<label for="practice_name">Practice Name</label>
      				<div class="col-2">
      					<input type="text" name="practice_name"><br/>
      				</div>
      				<br/>
      				<button type="submit">Submit</button>
				</form>
			</div>
			<div class="col-6">
				<!-- Provider List container -->
				<div class="row">
					<div class="col-sm">
						<h5>Provider List</h5>
					</div>
					<div class="col-sm no-gutters" align="right">
						<select name="sort">
							<option value="sort" disabled selected>Sort By...</option>
							<option value="first_name">First Name</option>
							<option value="last_name">Last Name</option>
							<option value="email_address">Email Address</option>
							<option value="specialty">Specialty</option>
							<option value="practice_name">Practice Name</option>
						</select>
					</div>
				</div>
				<!-- provider list table -->
				<table class="table table-borderless">
					<tbody id="provider-table-body">
						<!--
						<tr>
							<th scope="row" class="col-1"><input type="checkbox"/></th>
							<td class="col-8">
								<b>Last Name, First Name</b>
							</td>
							<td class="col-3" align="right">
								<b>Specialty</b>
							</td>
						</tr>
						<tr>
							<th scope="row" class="col-1"/>
							<td class="class="col-7">email@example.com</td>
							<td class="col-4" align="right">Practice Name</td>
						</tr>
						-->
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>
</html>